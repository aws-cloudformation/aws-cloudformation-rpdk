AWSTemplateFormatVersion: "2010-09-09"
Transform: AWS::Serverless-2016-10-31
Description: This CloudFormation template provisions an S3 bucket to upload handler artifacts to

Parameters:
  ResourceType:
    Type: String
    AllowedPattern: "^[a-zA-Z0-9]{2,64}-[a-zA-Z0-9]{2,64}-[a-zA-Z0-9]{2,64}$"

Resources:
  ResourceHandler:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: "./HelloWorld-1.0.jar"
      Description:
        Fn::Sub: "Handler for Example Resources"
      FunctionName:
        Fn::Sub: "Example-handler"
      Handler: "com.aws.cfn.LambdaWrapper::handleRequest"
      KmsKeyArn:
        Fn::ImportValue: EncryptionKey
      MemorySize: 128
      Role:
        Fn::ImportValue: LambdaRole
      Runtime: "java8"
      Timeout: 120

Outputs:
  ResourceHandlerArn:
    Value:
      Fn::GetAtt: ResourceHandler.Arn
    Export:
      Name:
        Fn::Sub: "Example-resource-handler"
