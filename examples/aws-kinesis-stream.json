{
  "Type": "AWS::Kinesis::Stream",
  "PhysicalResourceId": "identifier",
  "Definitions": {
    "StreamEncryption": {
      "Properties": {
        "EncryptionType": {
          "Type": "string",
          "Required": true,
          "UpdateType": "Mutable"
        },
        "KeyId": {
          "Type": "string",
          "Required": true,
          "UpdateType": "Mutable"
        }
      }
    }
  },
  "Properties": {
    "Name": {
      "Type": "string",
      "UpdateType": "Mutable",
      "Required": false
    },
    "ShardCount": {
      "Type": "integer",
      "UpdateType": "Mutable",
      "Required": true
    },
    "RetentionPeriodHours": {
      "Type": "integer",
      "UpdateType": "Mutable",
      "Required": true
    },
    "StreamEncryption": {
      "Type": {"$ref": "#/Definitions/StreamEncryption"},
      "UpdateType": "Mutable",
      "Required": false
    }
  },
  "Handlers": {
    "CreateHandler": {
      "InvocationType": "Synchronous",
      "ApiCalls" : [
        {
          "Name": "createStream",
          "ActionType": "write",
          "Exceptions": [
            {
              "Name": "ResourceInUseException",
              "Response": "Success"
            },
            {
              "Name": "LimitExceededException",
              "Response": "Failure"
            },
            {
              "Name": "InvalidArgumentException",
              "Response": "Failure"
            }
          ]
        },
        {
          "Name": "startStreamEncryption",
          "ActionType": "write"
        }
      ]
    },
    "DeleteHandler": {
      "InvocationType": "Synchronous",
      "ApiCalls": [
        {
          "Name": "deleteStream",
          "ActionType": "write",
          "Exceptions": [
            {
              "Name": "ResourceNotFoundException",
              "Response": "Success"
            },
            {
              "Name": "LimitExceededException",
              "Response": "Failure"
            }
          ]
        }
      ]
    },
    "UpdateHandler": {
      "InvocationType": "Synchronous",
      "ApiCalls": [
        {
          "Name": "updateShardCount",
          "ActionType": "write",
          "Exceptions": [
            {
              "Name": "InvalidArgumentException",
              "Response": "Failure"
            },
            {
              "Name": "LimitExceededException",
              "Response": "Failure"
            },
            {
              "Name": "ResourceInUseException",
              "Response": "Failure"
            },
            {
              "Name": "ResourceNotFoundException",
              "Response": "Failure"
            }
          ]
        },
        {
          "Name": "increaseStreamRetentionPeriod",
          "ActionType": "write"
        },
        {
          "Name": "startStreamEncryption",
          "ActionType": "write"
        }
      ]
    },
    "ReadHandler": {
      "InvocationType": "Synchronous",
      "ApiCalls": [
        {
          "Name": "describeStream",
          "ActionType": "read"
        }
      ]
    },
    "ListHandler": {
      "InvocationType": "Synchronous",
      "ApiCalls": [
        {
          "Name": "describeStream",
          "ActionType": "read"
        }
      ]
    }
  }
}