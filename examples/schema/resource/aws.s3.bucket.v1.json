{
    "$id": "aws.s3.bucket.v1.json",
	"definitions": {
		"iso-8601-utc": {
			"type": "string",
			"pattern": "^([0-2]\\d{3})-(0[0-9]|1[0-2])-([0-2]\\d|3[01])T([01]\\d|2[0-4]):([0-5]\\d):([0-6]\\d)((\\.\\d{3})?)Z$"
		},
		"AccelerateConfiguration": {
			"type": "object",
			"properties": {
				"AccelerationStatus": {
					"type": "string",
					"enum": [
						"Enabled",
						"Suspended"
					]
				}
			},
			"additionalProperties": false,
			"required": [
				"AccelerationStatus"
			]
		},
		"Destination": {
			"type": "object",
			"properties": {
				"BucketAccountId": {
					"type": "string"
				},
				"BucketArn": {
					"type": "string"
				},
				"Format": {
					"type": "string"
				},
				"Prefix": {
					"type": "string"
				}
			},
			"additionalProperties": false,
			"required": [
				"BucketArn",
				"Format"
			]
		},
		"DataExport": {
			"type": "object",
			"properties": {
				"Destination": {
					"$ref": "#/definitions/Destination"
				},
				"OutputSchemaVersion": {
					"type": "string",
					"const": "V_1"
				}
			},
			"additionalProperties": false,
			"required": [
				"Destination",
				"OutputSchemaVersion"
			]
		},
		"StorageClassAnalysis": {
			"type": "object",
			"properties": {
				"DataExport": {
					"$ref": "#/definitions/DataExport"
				}
			},
			"additionalProperties": false
		},
		"TagFilter": {
			"type": "object",
			"properties": {
				"Key": {
					"type": "string"
				},
				"Value": {
					"type": "string"
				}
			},
			"additionalProperties": false,
			"required": [
				"Key",
				"Value"
			]
		},
		"AnalyticsConfiguration": {
			"type": "object",
			"properties": {
				"Id": {
					"type": "string"
				},
				"Prefix": {
					"type": "string"
				},
				"StorageClassAnalysis": {
					"$ref": "#/definitions/StorageClassAnalysis"
				},
				"TagFilters": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/TagFilter"
					}
				}
			},
			"additionalProperties": false,
			"required": [
				"Id",
				"StorageClassAnalysis"
			]
		},
		"ServerSideEncryptionByDefault": {
			"type": "object",
			"properties": {
				"KMSMasterKeyID": {
					"type": "string"
				},
				"SSEAlgorithm": {
					"type": "string",
					"enum": ["AES256", "aws:kms"]
				}
			},
			"additionalProperties": false,
			"required": ["SSEAlgorithm"],
			"if": {
				"not": {
					"properties": {
						"SSEAlgorithm": {
							"enum": ["aws:kms"]
						}
					}
				}
			},
			"then": {
				"not": {
					"required": ["KMSMasterKeyID"]
				}
			}
		},
		"ServerSideEncryptionRule": {
			"type": "object",
			"properties": {
				"ServerSideEncryptionByDefault": {
					"$ref": "#/definitions/ServerSideEncryptionByDefault"
				}
			},
			"additionalProperties": false
		},
		"BucketEncryption": {
			"type": "object",
			"properties": {
				"ServerSideEncryptionConfiguration": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/ServerSideEncryptionRule"
					}
				}
			},
			"additionalProperties": false,
			"required": [
				"ServerSideEncryptionConfiguration"
			]
		},
		"CorsRule": {
			"type": "object",
			"properties": {
				"AllowedHeaders": {
					"type": "array",
					"items": {
						"type": "string"
					}
				},
				"AllowedMethods": {
					"type": "array",
					"items": {
						"type": "string"
					}
				},
				"AllowedOrigins": {
					"type": "array",
					"items": {
						"type": "string"
					}
				},
				"ExposedHeaders": {
					"type": "array",
					"items": {
						"type": "string"
					}
				},
				"Id": {
					"type": "string",
					"maxLength": 255
				},
				"MaxAge": {
					"type": "integer",
					"minimum": 0
				}
			},
			"additionalProperties": false,
			"required": [
				"AllowedMethods",
				"AllowedOrigins"
			]
		},
		"CorsConfiguration": {
			"type": "object",
			"properties": {
				"CorsRules": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/CorsRule"
					}
				}
			},
			"additionalProperties": false,
			"required": [
				"CorsRules"
			]
		},
		"InventoryConfiguration": {
			"type": "object",
			"properties": {
				"Destination": {
					"$ref": "#/definitions/Destination"
				},
				"Enabled": {
					"type": "boolean"
				},
				"Id": {
					"type": "string"
				},
				"IncludedObjectVersions": {
					"type": "string"
				},
				"OptionalFields": {
					"type": "array",
					"items": {
						"type": "string"
					}
				},
				"Prefix": {
					"type": "string"
				},
				"ScheduleFrequency": {
					"type": "string"
				}
			},
			"additionalProperties": false,
			"required": [
				"Destination",
				"Enabled",
				"Id",
				"IncludedObjectVersions",
				"ScheduleFrequency"
			]
		},
		"AbortIncompleteMultipartUpload": {
			"type": "object",
			"properties": {
				"DaysAfterInitiation": {
					"type": "integer",
					"minimum": 0
				}
			},
			"additionalProperties": false,
			"required": [
				"DaysAfterInitiation"
			]
		},
		"NoncurrentVersionTransition": {
			"type": "object",
			"properties": {
				"StorageClass": {
					"type": "string"
				},
				"TransitionInDays": {
					"type": "integer"
				}
			},
			"additionalProperties": false,
			"required": [
				"StorageClass",
				"TransitionInDays"
			]
		},
		"Transition": {
			"type": "object",
			"properties": {
				"StorageClass": {
					"type": "string"
				},
				"TransitionDate": {
					"$ref": "#/definitions/iso-8601-utc"
				},
				"TransitionInDays": {
					"type": "integer"
				}
			},
			"additionalProperties": false,
			"oneOf": [{
					"required": ["StorageClass", "HttpErrorCodeReturnedEquals"]
				},
				{
					"required": ["StorageClass", "KeyPrefixEquals"]
				}
			]
		},
		"Rule": {
			"type": "object",
			"properties": {
				"AbortIncompleteMultipartUpload": {
					"$ref": "#/definitions/AbortIncompleteMultipartUpload"
				},
				"ExpirationDate": {
					"$ref": "#/definitions/iso-8601-utc"
				},
				"ExpirationInDays": {
					"type": "integer"
				},
				"Id": {
					"type": "string"
				},
				"NoncurrentVersionExpirationInDays": {
					"type": "integer"
				},
				"NoncurrentVersionTransition": {
					"$ref": "#/definitions/NoncurrentVersionTransition",
					"$comment": "deprecated"
				},
				"NoncurrentVersionTransitions": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/NoncurrentVersionTransition"
					}
				},
				"Prefix": {
					"type": "string"
				},
				"Status": {
					"type": "string"
				},
				"TagFilters": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/TagFilter"
					}
				},
				"Transition": {
					"$ref": "#/definitions/Transition",
					"$comment": "deprecated"
				},
				"Transitions": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/Transition"
					}
				}
			},
			"additionalProperties": false,
			"oneOf": [{
					"required": ["Status", "AbortIncompleteMultipartUpload"]
				},
				{
					"required": ["Status", "ExpirationDate"]
				},
				{
					"required": ["Status", "ExpirationInDays"]
				},
				{
					"required": ["Status", "NoncurrentVersionExpirationInDays"]
				},
				{
					"required": ["Status", "NoncurrentVersionTransitions"]
				},
				{
					"required": ["Status", "Transitions"]
				}
			]
		},
		"LifecycleConfiguration": {
			"type": "object",
			"properties": {
				"Rules": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/Rule"
					}
				}
			},
			"additionalProperties": false,
			"required": [
				"Rules"
			]
		},
		"LoggingConfiguration": {
			"type": "object",
			"properties": {
				"DestinationBucketName": {
					"type": "string"
				},
				"LogFilePrefix": {
					"type": "string"
				}
			},
			"additionalProperties": false
		},
		"MetricsConfiguration": {
			"type": "object",
			"properties": {
				"Id": {
					"type": "string"
				},
				"Prefix": {
					"type": "string"
				},
				"TagFilters": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/TagFilter"
					}
				}
			},
			"additionalProperties": false,
			"required": [
				"Id"
			]
		},
		"FilterRule": {
			"type": "object",
			"properties": {
				"Name": {
					"type": "string"
				},
				"Value": {
					"type": "string"
				}
			},
			"additionalProperties": false,
			"required": [
				"Name",
				"Value"
			]
		},
		"S3KeyFilter": {
			"type": "object",
			"properties": {
				"Rules": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/FilterRule"
					}
				}
			},
			"additionalProperties": false,
			"required": [
				"Rules"
			]
		},
		"NotificationFilter": {
			"type": "object",
			"properties": {
				"S3Key": {
					"$ref": "#/definitions/S3KeyFilter"
				}
			},
			"additionalProperties": false,
			"required": [
				"S3Key"
			]
		},
		"LambdaConfiguration": {
			"type": "object",
			"properties": {
				"Event": {
					"type": "string"
				},
				"Filter": {
					"$ref": "#/definitions/NotificationFilter"
				},
				"Function": {
					"type": "string"
				}
			},
			"additionalProperties": false,
			"required": [
				"Event",
				"Function"
			]
		},
		"QueueConfiguration": {
			"type": "object",
			"properties": {
				"Event": {
					"type": "string"
				},
				"Filter": {
					"$ref": "#/definitions/NotificationFilter"
				},
				"Queue": {
					"type": "string"
				}
			},
			"additionalProperties": false,
			"required": [
				"Event",
				"Queue"
			]
		},
		"TopicConfiguration": {
			"type": "object",
			"properties": {
				"Event": {
					"type": "string"
				},
				"Filter": {
					"$ref": "#/definitions/NotificationFilter"
				},
				"Topic": {
					"type": "string"
				}
			},
			"additionalProperties": false,
			"required": [
				"Event",
				"Topic"
			]
		},
		"NotificationConfiguration": {
			"type": "object",
			"properties": {
				"LambdaConfigurations": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/LambdaConfiguration"
					}
				},
				"QueueConfigurations": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/QueueConfiguration"
					}
				},
				"TopicConfigurations": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/TopicConfiguration"
					}
				}
			},
			"additionalProperties": false
		},
		"AccessControlTranslation": {
			"type": "object",
			"properties": {
				"Owner": {
					"type": "string"
				}
			},
			"additionalProperties": false,
			"required": [
				"Owner"
			]
		},
		"EncryptionConfiguration": {
			"type": "object",
			"properties": {
				"ReplicaKmsKeyID": {
					"type": "string"
				}
			},
			"additionalProperties": false,
			"required": [
				"ReplicaKmsKeyID"
			]
		},
		"ReplicationDestination": {
			"type": "object",
			"properties": {
				"AccessControlTranslation": {
					"$ref": "#/definitions/AccessControlTranslation"
				},
				"Account": {
					"type": "string"
				},
				"Bucket": {
					"type": "string"
				},
				"EncryptionConfiguration": {
					"$ref": "#/definitions/EncryptionConfiguration"
				},
				"StorageClass": {
					"type": "string"
				}
			},
			"additionalProperties": false,
			"required": [
				"Bucket"
			]
		},
		"SseKmsEncryptedObjects": {
			"type": "object",
			"properties": {
				"Status": {
					"type": "string",
					"enum": [
						"Enabled",
						"Disabled"
					]
				}
			},
			"additionalProperties": false,
			"required": [
				"Status"
			]
		},
		"SourceSelectionCriteria": {
			"type": "object",
			"properties": {
				"SseKmsEncryptedObjects": {
					"$ref": "#/definitions/SseKmsEncryptedObjects"
				}
			},
			"additionalProperties": false,
			"required": [
				"SseKmsEncryptedObjects"
			]
		},
		"ReplicationRule": {
			"type": "object",
			"properties": {
				"Destination": {
					"$ref": "#/definitions/ReplicationDestination"
				},
				"Id": {
					"type": "string"
				},
				"Prefix": {
					"type": "string"
				},
				"SourceSelectionCriteria": {
					"$ref": "#/definitions/SourceSelectionCriteria"
				},
				"Status": {
					"type": "string"
				}
			},
			"additionalProperties": false,
			"required": [
				"Destination",
				"Prefix",
				"Status"
			]
		},
		"ReplicationConfiguration": {
			"type": "object",
			"properties": {
				"Role": {
					"type": "string"
				},
				"Rules": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/ReplicationRule"
					}
				}
			},
			"additionalProperties": false,
			"required": [
				"Role",
				"Rules"
			]
		},
		"Tag": {
			"type": "object",
			"properties": {
				"Key": {
					"type": "string",
					"minlength": 1,
					"maxlength": 127,
					"pattern": "^(?!aws:.*)[a-z0-9\\s\\_\\.\\/\\=\\+\\-]+$"
				},
				"Value": {
					"type": "string",
					"minlength": 1,
					"maxlength": 255,
					"pattern": "^(?!aws:.*)[a-z0-9\\s\\_\\.\\/\\=\\+\\-]+$"
				}
			},
			"additionalProperties": false,
			"required": [
				"Key",
				"Value"
			]
		},
		"VersioningConfiguration": {
			"type": "object",
			"properties": {
				"Status": {
					"type": "string",
					"default": "Suspended",
					"enum": [
						"Enabled",
						"Suspended"
					]
				}
			},
			"additionalProperties": false,
			"required": [
				"Status"
			]
		},
		"RedirectAllRequestsTo": {
			"type": "object",
			"properties": {
				"HostName": {
					"type": "string"
				},
				"Protocol": {
					"type": "string",
					"enum": [
						"https",
						"http"
					]
				}
			},
			"additionalProperties": false,
			"required": [
				"HostName"
			]
		},
		"RedirectRule": {
			"type": "object",
			"properties": {
				"HostName": {
					"type": "string"
				},
				"HttpRedirectCode": {
					"type": "string"
				},
				"Protocol": {
					"type": "string"
				},
				"ReplaceKeyPrefixWith": {
					"type": "string"
				},
				"ReplaceKeyWith": {
					"type": "string"
				}
			},
			"additionalProperties": false,
			"oneOf": [{
					"required": ["ReplaceKeyPrefixWith"]
				},
				{
					"required": ["ReplaceKeyWith"]
				}
			]
		},
		"RoutingRuleCondition": {
			"type": "object",
			"properties": {
				"HttpErrorCodeReturnedEquals": {
					"type": "string"
				},
				"KeyPrefixEquals": {
					"type": "string"
				}
			},
			"additionalProperties": false,
			"anyof": [{
					"required": ["HttpErrorCodeReturnedEquals"]
				},
				{
					"required": ["KeyPrefixEquals"]
				}
			]
		},
		"RoutingRule": {
			"type": "object",
			"properties": {
				"RedirectRule": {
					"$ref": "#/definitions/RedirectRule"
				},
				"RoutingRuleCondition": {
					"$ref": "#/definitions/RoutingRuleCondition"
				}
			},
			"additionalProperties": false,
			"required": [
				"RedirectRule"
			]
		},
		"WebsiteConfiguration": {
			"type": "object",
			"properties": {
				"ErrorDocument": {
					"type": "string"
				},
				"IndexDocument": {
					"type": "string"
				},
				"RedirectAllRequestsTo": {
					"$ref": "#/definitions/RedirectAllRequestsTo"
				},
				"RoutingRules": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/RoutingRule"
					}
				}
			},
			"additionalProperties": false,
			"oneOf": [{
					"required": ["RedirectAllRequestsTo"]
				},
				{
					"anyOf": [{
							"required": ["ErrorDocument"]
						},
						{
							"required": ["IndexDocument"]
						},
						{
							"required": ["RoutingRules"]
						}
					]
				}
			]
		}
	},
	"properties": {
		"AccelerateConfiguration": {
			"$ref": "#/definitions/AccelerateConfiguration"
		},
		"AccessControl": {
			"type": "string"
		},
		"AnalyticsConfigurations": {
			"type": "array",
			"items": {
				"$ref": "#/definitions/AnalyticsConfiguration"
			}
		},
		"BucketEncryption": {
			"$ref": "#/definitions/BucketEncryption"
		},
		"BucketName": {
			"type": "string"
		},
		"CorsConfiguration": {
			"$ref": "#/definitions/CorsConfiguration"
		},
		"InventoryConfigurations": {
			"type": "array",
			"items": {
				"$ref": "#/definitions/InventoryConfiguration"
			}
		},
		"LifecycleConfiguration": {
			"$ref": "#/definitions/LifecycleConfiguration"
		},
		"LoggingConfiguration": {
			"$ref": "#/definitions/LoggingConfiguration"
		},
		"MetricsConfigurations": {
			"type": "array",
			"items": {
				"$ref": "#/definitions/MetricsConfiguration"
			}
		},
		"NotificationConfiguration": {
			"$ref": "#/definitions/NotificationConfiguration"
		},
		"ReplicationConfiguration": {
			"$ref": "#/definitions/ReplicationConfiguration"
		},
		"Tags": {
			"type": "array",
			"items": {
				"$ref": "#/definitions/Tag"
			}
		},
		"VersioningConfiguration": {
			"$ref": "#/definitions/VersioningConfiguration"
		},
		"WebsiteConfiguration": {
			"$ref": "#/definitions/WebsiteConfiguration"
		}
	},
	"additionalProperties": false
}
